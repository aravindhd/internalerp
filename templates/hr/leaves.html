{% extends 'base.html' %}

{% block content %}
{% load staticfiles %}
<SECTION class="content">
	
<div class="table-responsive container"> 
	<legend>Leaves</legend>
    <form method="GET" action=''>
	<div class="search-box">
		<label for="name" class="control-label">Leave Info</label>
		<input type="text" name="searchQueryStr" class="form-control" placeholder="Search" value="{{ request.GET.searchQueryStr }}" />
	</div>
    <div class="panel-body">
        <table id="myTable" class="table table-fixedheader table-hover">
            <thead>
                <tr>
                    <th width="3%">#</th>
                    <th width="20%">Employee Name</th>
                    <th width="7%">Leave Type</th>
                    <th width="33%">Reason</th>
                    <th width="10%">Start Date</th>
                    <th width="10%">End Date</th>
                    <th width="7%"># Days</th>
					<th width="10%">Status</th>
                </tr>
            </thead>
            <tbody style="height:200px">
                {% for leave in leavesList %}
                {% if user.employeesdirectory.is_manager %}
                  {% url 'leave_update' id=leave.id as leaveUrl %}
                {% elif user.employeesdirectory.role == 'EMPLOYEE' %}
                  {% url 'leave_details' id=leave.id as leaveUrl %}
                {% else %}
                  {% url 'leaves_details' as backUrl %}
                {% endif %}
                <tr onclick="document.location='{{ leaveUrl }}'">
                    <td width="3%">{{ leave.id }}</td>
                    <td width="20%">{{ leave.employee_id }}</td>
                    <td width="7%">{{ leave.leaveType }}</td>
                    <td width="33%">{{ leave.reason }}</td>
                    <td width="10%">{{ leave.startedDate }}</td>
                    <td width="10%">{{ leave.endDate }}</td>
                    <td width="7%">{{ leave.numberOfDays }}</td>
                    <td width="10%">{{ leave.status }}</td>
                </tr>
                {% endfor %}				
            </tbody>
        </table>
    </div>
  </div>	
</SECTION>
{% endblock content %}